
<!--
What do admins need to do?
	- Add users to the system
		- Assign users a role (Admin, Teacher, Student)
			- If a Teacher
				- Assign teachers a class
			- If a student
				- Assign students to a class
	- Add classes / delete classes
  - Delete users. 


-->
<!DOCTYPE html>
<html lang="en">

<style>
  #logout {
    float: right;
  }
    .colored {
        /*background-color: rgb(210, 210, 210);*/
    }
</style>


<head>
  <title>Manage Tests</title>
    <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

  <!-- Parse -->
  <script src="//www.parsecdn.com/js/parse-1.4.2.min.js"></script>

</head>


<body class="colored" ng-app="crestwoodPortal">
  <div class="container colored" ng-controller="AdminIndexController">
    <p id="logout">Welcome {{ currentUser }} - <a ng-click="logout()">logout</a></p>
    <h1>Crestwood Test Portal</h1>
      <div class="col-md-12">
      <h3>Add User</h3>
        <div id="createUserError" hidden>
          <p style="color: red"> There was an error adding a user</p>
        </div>
        <div id="createUserSuccess" hidden>
          <p style="color: green"> Create added successfully</p>
        </div>
        <form id="createUserForm">	
        	E-mail: <input id="email" type="email" ng-model="user.name" required/><br />
        	Password: <input id="password" type="password" ng-model="user.password" required/> <br />
        	Account Type: 
        		<select ng-model="user.accountType" required>
        			<option value="Student">Student</option>
        			<option value="Teacher">Teacher</option>
        			<option value="Administrator">Administrator</option>
        		</select> <br />
        	<input type="submit" ng-click="createUser(user)" value="Add User"/>
        </form>
      <hr>
      <h3>Add Courses</h3>
        <div id="courseError" hidden>
          <p style="color: red"> There is already a course created with that code, please try another</p>
        </div>
        <div id="courseAdded" hidden>
          <p style="color: green"> Course successfully added</p>
        </div>
        <form>
          Course code: <input type="text" ng-model="course.code" required> <br/>
          <input type="submit" ng-click="addCourse(course)" value="Add Class" />
        </form>
      <hr>
      <h3>Assign Teachers</h3>
      <div class="errors" style="color: red" >
        <p id="assignTeacherError" hidden> There was an error assigning this teacher</p>
        <p id="teacherAssignNoCourseSelected" hidden> Please choose a course to assign</p>
        <p id="teacherAssignNoTeacherSelected" hidden> Please choose a teacher</p>
      </div>
      <div class="successes" style="color: green">
        <p id="assignTeacherSuccess" hidden> Teacher assigned successfully</p>
      </div>
      <form>
        Assign Teacher:
          <select ng-model="assign.teacherName" required>
            <option ng-repeat="teacher in allTeachers">{{teacher.name}}</option>
          </select><br>
        To Course:
        <div ng-repeat="course in allUnassignedCourses | orderBy:'name'">
          <label>
            <input class="checkbox" type="checkbox" checklist-model="teacherAssignedCourses.courses" checklist-value="course.name" />
            <span>{{course.name}}</span>
          </label>
        </div>
        <br>
        <input type="submit" ng-click="assignTeacher(assign)" value="Assign Teacher"></input>
      </form>
      <hr>

      <h3>Assigned Teachers</h3>
      <div class="container" style="margin-top: 10px">
        <div class="col-md-12" ng-repeat="teacher in allTeachers | filter:hasClasses">
          <h4 style="font-weight: bold;" ng-model="unassign.teacherEmail">{{teacher.name}}</h4>
          <table>
            <thead>
              <tr>
                <th>Class</th>
                <th>Delete</th>
              </tr>
            </thead>  
            <tr ng-repeat="assignedClass in teacher.assignedClasses">
              <td ng-model="unassign.class">{{ assignedClass }}</td>
              <td><button ng-click="unassignTeacher(unassign)">
                <img ng-src="/assets/images/x-mark.gif"/>
              </button></td>
            </tr>
          </table>
        </div>
      </div>
      <hr>
      <h3>Assign Students</h3>
        <div class="errors" style="color: red" >
          <p id="assignStudentError" hidden> There was an error assigning this student</p>
          <p id="studentAssignNoCourseSelected" hidden> Please choose a course to assign</p>
          <p id="studentAssignNoStudentSelected" hidden> Please choose a student</p>
        </div>
        <div class="successes" style="color: green">
          <p id="assignStudentSuccess" hidden> Student assigned to classes successfully</p>
        </div>
        <form>
          Assign Student:
            <select ng-model="assign.studentName" required>
              <option ng-repeat="student in allStudents">{{student.name}}</option>
            </select><br>
          To Course:
          <div ng-repeat="course in allCourses | orderBy:'name'">
            <label>
              <input class="checkbox" type="checkbox" checklist-model="teacherAssignedCourses.courses" checklist-value="course.name" />
              <span>{{course.name}}</span>
            </label>
          </div>
          <br>
          <input type="submit" ng-click="assignStudent(assign)" value="Assign Student"></input>
        </form>
      <hr>
      <h3>Assigned Students</h3>
      <hr>
      <h3>Delete users<h3>

  </div>

  <!-- angular -->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://code.angularjs.org/1.3.15/angular-route.min.js"></script>
    <script src="https://code.angularjs.org/1.3.15/angular-messages.min.js"></script>
    <script src="https://code.angularjs.org/1.3.15/angular-resource.min.js"></script>
    <script src="https://code.angularjs.org/1.3.15/angular-animate.min.js"></script>

  <!-- Modules -->
  <script src="/app/js/app.js"></script>
  
  <!-- Third party -->
  <script src="/vendor/checklist-model-0.2.4/checklist-model.js"></script>

    
  <!-- Controllers -->
  <script src="/app/js/controllers/AdminIndexController.js"></script>

</body>
</html>



